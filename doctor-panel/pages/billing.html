<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>
    Balance Handling
  </title>
  <!--     Fonts and icons     -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <!-- Nucleo Icons -->
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href="../assets/css/soft-ui-dashboard.css?v=1.0.6" rel="stylesheet" />
  <link rel="stylesheet" href="../assets/css/journal.css">
  <style>
    .zindex {
      z-index: -10 !important;
    }
  </style>

  <script>
    $('.modal-backdrop').addClass('zindex')
  </script>
</head>

<body class="g-sidenav-show  bg-gray-100">
  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 "
    id="sidenav-main">
    <div class="sidenav-header text-center py-3 my-3" style=" height: 200px;">
      <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none"
          aria-hidden="true" id="iconSidenav"></i>
      <div class="">
          <img src="/img/about_4.jpeg" class="rounded-circle " width="90" height="90" alt="main_logo" />
      </div>
      <div class="my-3">
          <h4>Dr. Muneem Khan</h4>
          <p>BDS, MDS - Oral & MBBS</p>
      </div>
  </div>
    <hr class="horizontal dark mt-0">
    <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link  active" href="../pages/dashboard.html">
            <div
              class="icon  icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons fs-5">dashboard</i>
            </div>
            <span class="nav-link-text ms-1 mx-2">Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link  active" href="../pages/tables.html">
            <div
              class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons p-0 m-0 fs-5 ">fact_check</i>
            </div>
            <span class="nav-link-text ms-1">Appointment's</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link  active" href="../pages/d-chatroom.html">
            <div
              class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons d-block fs-6">forum</i>
            </div>
            <span class="nav-link-text ms-1">Messages</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link active-1  active" href="../pages/billing.html">
            <div
              class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons p-0 m-0 fs-5 mb-2">manage_accounts</i>

            </div>
            <span class="nav-link-text ms-1">Billing</span>
          </a>
        </li>
        <li class="nav-item mt-3">
          <h6 class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6">Courses</h6>
        </li>
        <li class="nav-item">
          <a class="nav-link  active" href="../pages/addCourse.html">
            <div
              class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons p-0 m-0 fs-5 mb-2">post_add</i>
            </div>
            <span class="nav-link-text ms-1">Add new Course</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link  active" href="../pages/doctor_view_course.html">
            <div
              class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons p-0 m-0 fs-5 mb-2">cloud_upload</i>
            </div>
            <span class="nav-link-text ms-1">Recent Upload Course</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link  active" href="../pages/students_registration.html">
            <div
              class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons p-0 m-0 fs-5 mb-2">how_to_reg</i>
            </div>
            <span class="nav-link-text ms-1">Registered Students</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link  active" href="../pages/live_stream.html">
            <div
              class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons p-0 m-0 fs-5 mb-1">video_call</i>
            </div>
            <span class="nav-link-text ms-1">Start Live Sessions</span>
          </a>
        </li>
        <li class="nav-item mt-3">
          <h6 class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6">Account pages</h6>
        </li>
        <li class="nav-item">
          <a class="nav-link  active" href="../pages/profile.html">
            <div
              class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <i class="material-icons p-0 m-0 fs-5">person</i>

            </div>
            <span class="nav-link-text ms-1">Profile</span>
          </a>
        </li>

      </ul>
    </div>
  </aside>


  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur"
      navbar-scroll="true">
      <div class="container-fluid py-1 px-3">
        <nav aria-label="breadcrumb">
          <input class="form-control me-2" type="search" placeholder="Search more..." aria-label="Search">
        </nav>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
          </div>
          <ul class="navbar-nav  justify-content-end">
            <li class="nav-item d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body font-weight-bold px-0">
                <i class="fa fa-user me-sm-1"></i>
                <span class="d-sm-inline d-none">log Out</span>
              </a>
            </li>
            <li class="nav-item d-xl-none ps-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0" id="iconNavbarSidenav">
                <div class="sidenav-toggler-inner">
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                </div>
              </a>
            </li>
            <li class="nav-item px-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0">
                <i class="fa fa-cog fixed-plugin-button-nav cursor-pointer"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <div class="container-fluid  py-4">
      <div class="p-4 card" style="border-left: 7px solid rgba(5, 91, 112, 0.788);">
        <div class="row ">
          <div class="col-lg-12 ">
            <div class="row">
              <div class="col-xl-12 ">
                <div class="row">
                  <div class="col-md-6">
                    <div class="card">
                      <div class="card-header mx-4 p-3 text-center">
                        <div class="icon icon-shape icon-lg bg-gradient-primary shadow text-center border-radius-lg">
                          <i class="fas fa-landmark opacity-10"></i>
                        </div>
                      </div>
                      <div class="card-body pt-0 p-3 text-center">
                        <h6 class="text-center mb-0">current Balance</h6>
                        <hr class="horizontal dark my-3">
                        <h5 class="mb-0 current_balance" id="current_balance">0</h5>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="card">
                      <div class="card-header mx-4 p-3 text-center">
                        <div class="icon icon-shape icon-lg bg-gradient-primary shadow text-center border-radius-lg">
                          <i class="fas fa-landmark opacity-10"></i>
                        </div>
                      </div>
                      <div class="card-body pt-0 p-3 text-center">
                        <button type="button" data-bs-toggle="modal" id="withdraw" data-bs-target="#exampleModal"
                          class="text-center mb-0 btn btn-light btn-sm py-1">Withdraw</button>
                        <!-- <h6 class=""></h6> -->
                        <hr class="horizontal dark my-3">
                        <h5 class="mb-0 withdraw_ammount" id="withdraw_ammount">0</h5>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6 my-3">
                    <div class="card">
                      <div class="card-header mx-4 p-3 text-center">
                        <div class="icon icon-shape icon-lg bg-gradient-primary shadow text-center border-radius-lg">
                          <i class="fas fa-landmark opacity-10"></i>
                        </div>
                      </div>
                      <div class="card-body pt-0 p-3 text-center">
                        <h6 class="text-center mb-0">Total Amount</h6>
                        <span class="text-xs">your balance is save</span>
                        <hr class="horizontal dark my-3">
                        <h5 class="mb-0 total_balance" id="total_balance">0</h5>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6 d-flex align-items-center justify-content-center  my-3">
                    <div class="card d-flex align-items-center p-4 py-5 cr-pointer justify-content-center w-100"
                      data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                      <div class="card-header mx-4 p-3 text-center">
                        <div class="icon icon-shape icon-lg bg-gradient-primary shadow text-center border-radius-lg">
                          <i class="fas fa-landmark opacity-10"></i>
                        </div>
                      </div>
                      <div class="d-flex align-items-center">
                        <h6 class="mb-0">Create New Bill </h6>
                        <i class="material-icons fs-3 mx-2 ">add</i>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>


        </div>


        <div class="row">
          <div class="col-md-12 mt-4">
            <div class="card">
              <div class="card-body pt-4 p-3">
                <ul class="list-group">
                  <li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg">
                    <div class="d-flex flex-column">
                      <h6 class="mb-3 text-sm">Invoice</h6>
                      <span class="mb-2 text-xs">Patient Name: <span class="text-dark font-weight-bold ms-sm-2">Abdul Basit</span></span>
                      <span class="mb-2 text-xs">Email Address: <span
                          class="text-dark ms-sm-2 font-weight-bold">syedabdulbasit764@gmail.com</span></span>
                      <span class="text-xs mb-2">Contact Number: <span
                          class="text-dark ms-sm-2 font-weight-bold">+92318-21716364</span></span>
                        <span class="text-xs mb-2">Disease: <span
                            class="text-dark ms-sm-2 font-weight-bold">Body Pain</span></span>
                          <span class="text-xs">Description: <span
                              class="text-dark ms-sm-2 font-weight-bold">Medicine is the science[1] and practice[2] of caring for a patient, managing the diagnosis, prognosis, prevention, treatment, palliation of their injury or disease, and promoting their health. Medicine encompasses a variety</span></span>
                    </div>
                    <div class="ms-auto text-end">
                      <a class="btn btn-link text-danger text-gradient px-3 mb-0" href="javascript:;"><i
                          class="far fa-trash-alt me-2"></i>Delete</a>
                      <a class="btn btn-link text-dark px-3 mb-0" href="javascript:;"><i
                          class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i>Edit</a>
                    </div>
                  </li>
                  <li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg">
                    <div class="d-flex flex-column">
                      <h6 class="mb-3 text-sm">Invoice</h6>
                      <span class="mb-2 text-xs">Patient Name: <span class="text-dark font-weight-bold ms-sm-2">Abdul Basit</span></span>
                      <span class="mb-2 text-xs">Email Address: <span
                          class="text-dark ms-sm-2 font-weight-bold">syedabdulbasit764@gmail.com</span></span>
                      <span class="text-xs mb-2">Contact Number: <span
                          class="text-dark ms-sm-2 font-weight-bold">+92318-21716364</span></span>
                        <span class="text-xs mb-2">Disease: <span
                            class="text-dark ms-sm-2 font-weight-bold">Body Pain</span></span>
                          <span class="text-xs">Description: <span
                              class="text-dark ms-sm-2 font-weight-bold">Medicine is the science[1] and practice[2] of caring for a patient, managing the diagnosis, prognosis, prevention, treatment, palliation of their injury or disease, and promoting their health. Medicine encompasses a variety</span></span>
                    </div>
                    <div class="ms-auto text-end">
                      <a class="btn btn-link text-danger text-gradient px-3 mb-0" href="javascript:;"><i
                          class="far fa-trash-alt me-2"></i>Delete</a>
                      <a class="btn btn-link text-dark px-3 mb-0" href="javascript:;"><i
                          class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i>Edit</a>
                    </div>
                  </li>
                     <li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg">
                    <div class="d-flex flex-column">
                      <h6 class="mb-3 text-sm">Invoice</h6>
                      <span class="mb-2 text-xs">Patient Name: <span class="text-dark font-weight-bold ms-sm-2">Abdul Basit</span></span>
                      <span class="mb-2 text-xs">Email Address: <span
                          class="text-dark ms-sm-2 font-weight-bold">syedabdulbasit764@gmail.com</span></span>
                      <span class="text-xs mb-2">Contact Number: <span
                          class="text-dark ms-sm-2 font-weight-bold">+92318-21716364</span></span>
                        <span class="text-xs mb-2">Disease: <span
                            class="text-dark ms-sm-2 font-weight-bold">Body Pain</span></span>
                          <span class="text-xs">Description: <span
                              class="text-dark ms-sm-2 font-weight-bold">Medicine is the science[1] and practice[2] of caring for a patient, managing the diagnosis, prognosis, prevention, treatment, palliation of their injury or disease, and promoting their health. Medicine encompasses a variety</span></span>
                    </div>
                    <div class="ms-auto text-end">
                      <a class="btn btn-link text-danger text-gradient px-3 mb-0" href="javascript:;"><i
                          class="far fa-trash-alt me-2"></i>Delete</a>
                      <a class="btn btn-link text-dark px-3 mb-0" href="javascript:;"><i
                          class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i>Edit</a>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </main>


  <!-- withdraw Payment modal -->


  <!-- Modal -->
  <div style="z-index: 100000 !important;">
    <div class="modal fade position-fixed" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
      aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Payment Withdraw</h5>
            <button type="button" class="btn-close " style="background-color: rgba(180, 175, 175, 0.548);"
              data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body text-center">
            <div class="transfer-form">
              <div class="icon icon-shape icon-lg bg-gradient-primary shadow text-center border-radius-lg">
                <i class="fas fa-landmark opacity-10"></i>
              </div>
              <!-- <button type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" class="text-center mb-0 btn btn-light btn-sm py-1">Withdraw</button> -->
              <h5 class="text-center mb-0 m-0 my-2 p-0">Withdraw</h5>
              <div class="px-4">
                <input type="text" placeholder="Enter amount here" class=" form-control my-3 "
                  id="withdraw_payment_input" required>
                <div id="Alert"></div>
              </div>
              <div id="no-amount"></div>
              <div id="alert"></div>
            </div>
            <img src="/img/transfer.gif" class="w-100  transfer" alt="">
            <div class=" done">
              <img src="/img/done.gif" class="w-50  " alt="">
              <h5>Payment Success</h5>
            </div>
            <button type="button" id="transfer-btn" class="btn btn-primary my-3"
              onclick="transfer_payment()">transfer</button>

          </div>
          <!-- <div class="col-md-6"> -->
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>



  <!-- create bill modal -->

  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Create Bill</h5>
          <button type="button" class="btn-close" style="background-color: rgba(180, 175, 175, 0.548);"
            data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <h5 class="text-secondary mb-3 p-0">Invoice# 45224 </h5>
          <div class="row">
            <div class="col-sm-6">
              <input type="text" class="form-control" placeholder="Patient name" aria-label="First name">
            </div>
            <div class="col-sm-6">
              <input type="email" class="form-control" placeholder="email" aria-label="Last name">
            </div>
            <div class="col-sm-6 my-3">
              <input type="text" class="form-control" placeholder="disease" aria-label="First name">
            </div>
            <div class="col-sm-6 my-3">
              <input type="number" class="form-control" placeholder="Fee" aria-label="Fee">
            </div>
            <div class="col-sm-6">
              <input type="time" class="form-control" aria-label="Last name">
            </div>
            <div class="col-sm-6 ">
              <input type="date" class="form-control" aria-label="Last name">
            </div>
            <div class="form-floating col-sm-12 my-3">
              <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea"></textarea>
              <label for="floatingTextarea" class="text-secondary">Discription</label>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary">Create</button>
        </div>
      </div>
    </div>
  </div>









  <!-- <script src="../assets/script/script.js"></script> -->
  <!--   Core JS Files   -->
  <!-- <script src="../assets/js/core/popper.min.js"></script> -->
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
      $('#withdraw').click(function () {

        $('.sidenav').addClass('zindex')
      })
    }

    $(".transfer").hide();
    $(".done").hide();
    $('#search_input').click(function () {
      $(this).removeClass('focused')
    })

    var current_balance = document.getElementById("current_balance")
    var withdraw_ammount = document.getElementById("withdraw_ammount");
    var total_balance = document.getElementById("total_balance");


    let get_dr_fee = localStorage.getItem("appoitment");
    let parse_get_dr_fee = JSON.parse(get_dr_fee);

    for (let i = 0; i < parse_get_dr_fee.length; i++) {
      const element = parse_get_dr_fee[i];
      let get_fee = element.fee


      var numb = get_fee.match(/\d/g);
      numb = numb.join("");
      var fee_parse;
      fee_parse = parseInt(numb)

      console.log(fee_parse);
      current_balance.innerHTML = fee_parse


      var sum = fee_parse

      var sum1;



      function transfer_payment() {

        var withdraw_payment_input = parseInt(document.getElementById('withdraw_payment_input').value);


        if (withdraw_payment_input) {


          if (withdraw_payment_input > sum) {
            let Alert = `
              <div style='color: #842029; background-color: #f8d7da; border-color: #f5c2c7;' class="alert py-2" role="alert">
                <b>Oops..</b> You have no balance  
              </div>
          `
            document.getElementById('Alert').innerHTML = Alert;
            setTimeout(() => {

              $('.alert').fadeOut(150)
            }, 3000);

          } else {
            sum = sum - withdraw_payment_input
            current_balance.innerHTML = sum
            sum1 = withdraw_payment_input
            $('.transfer-form').hide();
            $('#transfer-btn').hide()
            $(".transfer").show();

            setTimeout(() => {
              $(".transfer").hide();
              $(".done").show();
            }, 6000);

            setTimeout(() => {
              $(".done").hide();
              $('.transfer-form').show();
              $('#transfer-btn').show()
            }, 10000);


            if (sum1) {
              document.getElementById('withdraw_ammount').innerText = sum1
            } else {
              sum1 = 0;
            }

          }

          document.getElementById('total_balance').innerHTML = sum
          console.log(sum);
          document.getElementById('withdraw_payment_input').value = '';

        } else {
          let Alert2 = `
              <div style='color: #664d03; background-color: #fff3cd; border-color: #ffecb5;' class="alert py-2" role="alert">
                <b>Oops..</b> Enter the Value 
              </div>
          `
          document.getElementById('Alert').innerHTML = Alert2;
          setTimeout(() => {

            $('.alert').fadeOut(150)
          }, 3000);
        }
      }

    }






  </script>
  <!-- Github buttons -->
  <!-- <script async defer src="https://buttons.github.io/buttons.js"></script> -->
  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../assets/js/soft-ui-dashboard.min.js?v=1.0.6"></script>
</body>

</html>